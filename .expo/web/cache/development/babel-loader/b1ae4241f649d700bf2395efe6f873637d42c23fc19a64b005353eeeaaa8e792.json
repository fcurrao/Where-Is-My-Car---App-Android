{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useState } from \"react\";\nimport * as Location from \"expo-location\";\nimport AddButton from \"../Components/AddButton\";\nimport { usePostUserLocationMutation } from \"../Services/shopServices\";\nimport { useGetUserLocationQuery } from \"../Services/shopServices\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setUserLocation } from \"../features/User/userSlice\";\nimport { colors } from \"../Global/Colors\";\nimport MapPreview from \"../Components/MapPreview\";\nimport { google_maps_api_key } from \"../Database/firebaseConfig\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar LocationView = function LocationView(_ref) {\n  var location = _ref.location,\n    navigation = _ref.navigation;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    address = _useState4[0],\n    setAddress = _useState4[1];\n  var _useSelector = useSelector(function (state) {\n      return state.userReducer.value;\n    }),\n    localId = _useSelector.localId;\n  var _useGetUserLocationQu = useGetUserLocationQuery(localId),\n    UserLocation = _useGetUserLocationQu.location;\n  var _usePostUserLocationM = usePostUserLocationMutation(),\n    _usePostUserLocationM2 = _slicedToArray(_usePostUserLocationM, 2),\n    triggerPostAddress = _usePostUserLocationM2[0],\n    result = _usePostUserLocationM2[1];\n  var goBack = function goBack() {\n    navigation.goBack();\n  };\n  fffff = function fffff() {\n    var locationFormatted = {\n      latitude: -45.22223,\n      longitude: 12.23232222,\n      address: \"acoyte 1532\"\n    };\n    console.log(locationFormatted);\n  };\n  useEffect(function () {\n    console.log(\"aca\");\n    console.log(UserLocation);\n    console.log(\"aca\");\n    console.log(localId);\n    setAddress(\"acoyte 1432\");\n  }, []);\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      try {\n        if (location.latitude) {\n          var url_reverse_geocode = \"https://maps.googleapis.com/maps/api/geocode/json?latlng=\" + location.latitude + \",\" + location.longitude + \"&key=\" + google_maps_api_key;\n          var response = yield fetch(url_reverse_geocode);\n          var data = yield response.json();\n          setAddress(data.results[0].formatted_address);\n        }\n      } catch (error) {\n        setError(error.message);\n      }\n    })();\n  }, [location]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.text,\n      children: \"My Address\"\n    }), location ? _jsxs(_Fragment, {\n      children: [_jsxs(Text, {\n        style: styles.text,\n        children: [\"Lat: \", location.latitude, \", long: \", location.longitude, \".\"]\n      }), _jsx(MapPreview, {\n        location: location\n      }), _jsxs(Text, {\n        style: styles.address,\n        children: [\"Adress: \", address]\n      }), _jsx(AddButton, {\n        onPress: goBack,\n        title: \"goBack\"\n      })]\n    }) : _jsx(_Fragment, {\n      children: _jsx(View, {\n        style: styles.noLocationContainer,\n        children: _jsx(Text, {\n          children: error\n        })\n      })\n    })]\n  });\n};\nexport default LocationView;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"flex-start\"\n  },\n  text: {\n    paddingTop: 20,\n    fontFamily: 'Josefin',\n    fontSize: 18\n  },\n  noLocationContainer: {\n    width: 200,\n    height: 200,\n    borderWidth: 2,\n    borderColor: colors.peach,\n    padding: 10,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  address: {\n    padding: 10,\n    fontSize: 16\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","Location","AddButton","usePostUserLocationMutation","useGetUserLocationQuery","useDispatch","useSelector","setUserLocation","colors","MapPreview","google_maps_api_key","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LocationView","_ref","location","navigation","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","address","setAddress","_useSelector","state","userReducer","value","localId","_useGetUserLocationQu","UserLocation","_usePostUserLocationM","_usePostUserLocationM2","triggerPostAddress","result","goBack","fffff","locationFormatted","latitude","longitude","console","log","_asyncToGenerator","url_reverse_geocode","response","fetch","data","json","results","formatted_address","message","View","style","styles","container","children","Text","text","onPress","title","noLocationContainer","StyleSheet","create","flex","alignItems","justifyContent","paddingTop","fontFamily","fontSize","width","height","borderWidth","borderColor","peach","padding"],"sources":["C:/Users/federico.currao/Desktop/OtrosFC/mycar/Where-Is-My-Car---App-Android/src/Screens/LocationView.jsx"],"sourcesContent":["import { StyleSheet, Text, View } from \"react-native\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport * as Location from \"expo-location\";\r\nimport AddButton from \"../Components/AddButton\";\r\nimport { usePostUserLocationMutation } from \"../Services/shopServices\";\r\nimport { useGetUserLocationQuery } from \"../Services/shopServices\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setUserLocation } from \"../features/User/userSlice\";\r\nimport { colors } from \"../Global/Colors\";\r\nimport MapPreview from \"../Components/MapPreview\";\r\nimport { google_maps_api_key } from \"../Database/firebaseConfig\";\r\n\r\nconst LocationView = ({ location, navigation }) => {\r\n\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const [address, setAddress] = useState(null);\r\n\r\n    const {localId} = useSelector(state => state.userReducer.value)\r\n    const {location: UserLocation} = useGetUserLocationQuery(localId)\r\n    const [triggerPostAddress, result] = usePostUserLocationMutation(); \r\n\r\n\r\n\r\n    const goBack = () => {\r\n        navigation.goBack()\r\n    }\r\n    \r\n     fffff =() => {\r\n        const locationFormatted = {\r\n            latitude: -45.22223,\r\n            longitude: 12.23232222,\r\n            address: \"acoyte 1532\",\r\n        }\r\n        console.log(locationFormatted)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"aca\")\r\n        console.log(UserLocation)\r\n        console.log(\"aca\")\r\n        console.log(localId)\r\n        setAddress(\"acoyte 1432\")\r\n        \r\n    \r\n    }, []);\r\n \r\n\r\n    //Reverse geocoding\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (location.latitude) {\r\n                    const url_reverse_geocode = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${location.latitude},${location.longitude}&key=${google_maps_api_key}`;\r\n                    const response = await fetch(url_reverse_geocode);\r\n                    const data = await response.json();\r\n                    setAddress(data.results[0].formatted_address);\r\n                }\r\n            } catch (error) {\r\n                setError(error.message);\r\n            }\r\n        })();\r\n    }, [location]);\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text\r\n                style = {styles.text}\r\n            >My Address</Text>\r\n            {/* Flatlist con las directions */}\r\n            {location ? (\r\n                <>\r\n                    <Text \r\n                        style = {styles.text}\r\n                    >Lat: {location.latitude}, long: {location.longitude}.\r\n                    </Text>\r\n                    <MapPreview location={location} />\r\n                    <Text style={styles.address}>\r\n                        Adress: {address}\r\n                    </Text>\r\n                    <AddButton\r\n                        onPress={goBack}\r\n                        title=\"goBack\"\r\n                    />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <View style={styles.noLocationContainer}>\r\n                        <Text>{error}</Text>\r\n                    </View>\r\n                </>\r\n            )}\r\n        </View>\r\n    );\r\n};\r\n\r\nexport default LocationView;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n    },\r\n    text: {\r\n        paddingTop: 20,\r\n        fontFamily: 'Josefin',\r\n        fontSize: 18\r\n    },\r\n    noLocationContainer: {\r\n        width: 200,\r\n        height: 200,\r\n        borderWidth: 2,\r\n        borderColor: colors.peach,\r\n        padding: 10,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    address: {\r\n        padding: 10,\r\n        // fontFamily: \"Ubuntu\",\r\n        fontSize: 16,\r\n    },\r\n});"],"mappings":";;;;;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAO,KAAKC,QAAQ,MAAM,eAAe;AACzC,OAAOC,SAAS;AAChB,SAASC,2BAA2B;AACpC,SAASC,uBAAuB;AAChC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,eAAe;AACxB,SAASC,MAAM;AACf,OAAOC,UAAU;AACjB,SAASC,mBAAmB;AAAqC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEjE,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAiC;EAAA,IAA3BC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;IAAEC,UAAU,GAAAF,IAAA,CAAVE,UAAU;EAExC,IAAAC,SAAA,GAA0BrB,QAAQ,CAAC,EAAE,CAAC;IAAAsB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EAEtB,IAAAI,UAAA,GAA8B1B,QAAQ,CAAC,IAAI,CAAC;IAAA2B,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1B,IAAAG,YAAA,GAAkBxB,WAAW,CAAC,UAAAyB,KAAK;MAAA,OAAIA,KAAK,CAACC,WAAW,CAACC,KAAK;IAAA,EAAC;IAAxDC,OAAO,GAAAJ,YAAA,CAAPI,OAAO;EACd,IAAAC,qBAAA,GAAiC/B,uBAAuB,CAAC8B,OAAO,CAAC;IAAhDE,YAAY,GAAAD,qBAAA,CAAtBhB,QAAQ;EACf,IAAAkB,qBAAA,GAAqClC,2BAA2B,CAAC,CAAC;IAAAmC,sBAAA,GAAAf,cAAA,CAAAc,qBAAA;IAA3DE,kBAAkB,GAAAD,sBAAA;IAAEE,MAAM,GAAAF,sBAAA;EAIjC,IAAMG,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;IACjBrB,UAAU,CAACqB,MAAM,CAAC,CAAC;EACvB,CAAC;EAEAC,KAAK,GAAE,SAAAA,MAAA,EAAM;IACV,IAAMC,iBAAiB,GAAG;MACtBC,QAAQ,EAAE,CAAC,QAAQ;MACnBC,SAAS,EAAE,WAAW;MACtBjB,OAAO,EAAE;IACb,CAAC;IACDkB,OAAO,CAACC,GAAG,CAACJ,iBAAiB,CAAC;EAClC,CAAC;EAGD5C,SAAS,CAAC,YAAM;IACZ+C,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAClBD,OAAO,CAACC,GAAG,CAACX,YAAY,CAAC;IACzBU,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAClBD,OAAO,CAACC,GAAG,CAACb,OAAO,CAAC;IACpBL,UAAU,CAAC,aAAa,CAAC;EAG7B,CAAC,EAAE,EAAE,CAAC;EAIN9B,SAAS,CAAC,YAAM;IACZiD,iBAAA,CAAC,aAAY;MACT,IAAI;QACA,IAAI7B,QAAQ,CAACyB,QAAQ,EAAE;UACnB,IAAMK,mBAAmB,iEAA+D9B,QAAQ,CAACyB,QAAQ,SAAIzB,QAAQ,CAAC0B,SAAS,aAAQnC,mBAAqB;UAC5J,IAAMwC,QAAQ,SAASC,KAAK,CAACF,mBAAmB,CAAC;UACjD,IAAMG,IAAI,SAASF,QAAQ,CAACG,IAAI,CAAC,CAAC;UAClCxB,UAAU,CAACuB,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAACC,iBAAiB,CAAC;QACjD;MACJ,CAAC,CAAC,OAAO/B,KAAK,EAAE;QACZC,QAAQ,CAACD,KAAK,CAACgC,OAAO,CAAC;MAC3B;IACJ,CAAC,EAAE,CAAC;EACR,CAAC,EAAE,CAACrC,QAAQ,CAAC,CAAC;EAEd,OACIL,KAAA,CAAC2C,IAAI;IAACC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,GAC1BjD,IAAA,CAACkD,IAAI;MACDJ,KAAK,EAAIC,MAAM,CAACI,IAAK;MAAAF,QAAA,EACxB;IAAU,CAAM,CAAC,EAEjB1C,QAAQ,GACLL,KAAA,CAAAE,SAAA;MAAA6C,QAAA,GACI/C,KAAA,CAACgD,IAAI;QACDJ,KAAK,EAAIC,MAAM,CAACI,IAAK;QAAAF,QAAA,GACxB,OAAK,EAAC1C,QAAQ,CAACyB,QAAQ,EAAC,UAAQ,EAACzB,QAAQ,CAAC0B,SAAS,EAAC,GACrD;MAAA,CAAM,CAAC,EACPjC,IAAA,CAACH,UAAU;QAACU,QAAQ,EAAEA;MAAS,CAAE,CAAC,EAClCL,KAAA,CAACgD,IAAI;QAACJ,KAAK,EAAEC,MAAM,CAAC/B,OAAQ;QAAAiC,QAAA,GAAC,UACjB,EAACjC,OAAO;MAAA,CACd,CAAC,EACPhB,IAAA,CAACV,SAAS;QACN8D,OAAO,EAAEvB,MAAO;QAChBwB,KAAK,EAAC;MAAQ,CACjB,CAAC;IAAA,CACJ,CAAC,GAEHrD,IAAA,CAAAI,SAAA;MAAA6C,QAAA,EACIjD,IAAA,CAAC6C,IAAI;QAACC,KAAK,EAAEC,MAAM,CAACO,mBAAoB;QAAAL,QAAA,EACpCjD,IAAA,CAACkD,IAAI;UAAAD,QAAA,EAAErC;QAAK,CAAO;MAAC,CAClB;IAAC,CACT,CACL;EAAA,CACC,CAAC;AAEf,CAAC;AAED,eAAeP,YAAY;AAE3B,IAAM0C,MAAM,GAAGQ,UAAU,CAACC,MAAM,CAAC;EAC7BR,SAAS,EAAE;IACPS,IAAI,EAAE,CAAC;IACPC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE;EACpB,CAAC;EACDR,IAAI,EAAE;IACFS,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,SAAS;IACrBC,QAAQ,EAAE;EACd,CAAC;EACDR,mBAAmB,EAAE;IACjBS,KAAK,EAAE,GAAG;IACVC,MAAM,EAAE,GAAG;IACXC,WAAW,EAAE,CAAC;IACdC,WAAW,EAAEtE,MAAM,CAACuE,KAAK;IACzBC,OAAO,EAAE,EAAE;IACXT,cAAc,EAAE,QAAQ;IACxBD,UAAU,EAAE;EAChB,CAAC;EACD1C,OAAO,EAAE;IACLoD,OAAO,EAAE,EAAE;IAEXN,QAAQ,EAAE;EACd;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}